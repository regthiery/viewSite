<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QCM : QCM Matériaux de Carrière</title>
    <link rel="stylesheet" href="../../css/styleqcm1.css">
</head>
<body>

<div class="nav-buttons">
    <a href="../fiche01.html"   class="nav-button"  >Retour</a>
    <a href="qcm06.html" class="nav-button"  >Page précédente</a>
    <a href="" class="nav-button"  disabled>Page suivante</a>
</div>

<div class="container">
    <h1>QCM : Matériaux de Carrière - Auto-évaluation</h1>
    <h2>Le plâtre</h2>
    <form id="qcm-form">
        <div class="question-box" id="q1-box">
            <div class="question">1. Quelle est la matière première principale du plâtre ?  </div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q1" value="D"> A) L’argile   </label>
                <label><input type="radio" class="checkbox-margin" name="q1" value="A"> B) Le gypse   </label>
                <label><input type="radio" class="checkbox-margin" name="q1" value="B"> C) La calcite   </label>
                <label><input type="radio" class="checkbox-margin" name="q1" value="C"> D) La dolomie   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> La matière première du plâtre est le gypse (CaSO<sub>4</sub>·2H<sub>2</sub>O), une roche sédimentaire évaporitique. Le plâtre est obtenu en chauffant le gypse pour éliminer une partie de son eau de cristallisation, le transformant en sulfate de calcium hémihydraté (CaSO<sub>4</sub>·1/2H<sub>2</sub>O).</div>
		</div>
        <div class="question-box" id="q2-box">
            <div class="question">2. Comment s'appelle le minéral constituant le plâtre ?  </div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q2" value="A"> A) Le gypse   </label>
                <label><input type="radio" class="checkbox-margin" name="q2" value="B"> B) La calcite   </label>
                <label><input type="radio" class="checkbox-margin" name="q2" value="D"> C) L'anhydrite   </label>
                <label><input type="radio" class="checkbox-margin" name="q2" value="C"> D) La dolomie   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> Le minéral constituant le plâtre s'appelle le gypse. C'est un sulfate de calcium hydraté (CaSO<sub>4</sub>·2H<sub>2</sub>O) qui, une fois chauffé pour éliminer une partie de son eau, devient le plâtre utilisé en construction et en moulage.	</div>
		</div>
        <div class="question-box" id="q3-box">
            <div class="question">3. Quelle est la formule chimique du minéral constitutif du plâtre ?	</div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q3" value="A"> A) CaSO<sub>4</sub>·2H<sub>2</sub>O   </label>
                <label><input type="radio" class="checkbox-margin" name="q3" value="B"> B) CaSO<sub>4</sub>   </label>
                <label><input type="radio" class="checkbox-margin" name="q3" value="D"> C) Ca(OH)<sub>2</sub>   </label>
                <label><input type="radio" class="checkbox-margin" name="q3" value="C"> D) CaCO<sub>3</sub>   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> Le minéral constitutif du plâtre est le gypse, dont la formule chimique est CaSO<sub>4</sub>·2H<sub>2</sub>O. Il s'agit d'un sulfate de calcium hydraté contenant deux molécules d'eau de cristallisation. Lorsque le gypse est chauffé, il perd une partie de cette eau pour former le plâtre.</div>
		</div>
        <div class="question-box" id="q4-box">
            <div class="question">4. Est-ce que l'on peut extraire de l'anhydrite pour fabriquer du plâtre ?  </div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q4" value="C"> A) Oui, mais seulement si l'anhydrite est mélangée avec de la calcite   </label>
                <label><input type="radio" class="checkbox-margin" name="q4" value="D"> B) Non, car l'anhydrite ne contient pas de sulfate de calcium   </label>
                <label><input type="radio" class="checkbox-margin" name="q4" value="B"> C) Non, car l'anhydrite est chimiquement différente   </label>
                <label><input type="radio" class="checkbox-margin" name="q4" value="A"> D) Oui, en la réhydratant </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> L'anhydrite (CaSO<sub>4</sub>) peut être utilisée pour fabriquer du plâtre, mais elle doit d'abord être réhydratée pour redevenir du gypse (CaSO<sub>4</sub>·2H<sub>2</sub>O). Cette transformation nécessite des conditions spécifiques, car l'anhydrite est la forme anhydre du sulfate de calcium, dépourvue d'eau de cristallisation.</div>
		</div>
        <div class="question-box" id="q5-box">
            <div class="question">5. Selon le Code Minier, dans quelle catégorie est classée une exploitation souterraine qui extrait les ressources nécessaires au plâtre ?  </div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q5" value="D"> A) Dans la catégorie des exploitations hydrauliques   </label>
                <label><input type="radio" class="checkbox-margin" name="q5" value="C"> B) Dans la catégorie des gisements énergétiques   </label>
                <label><input type="radio" class="checkbox-margin" name="q5" value="B"> C) Dans la catégorie des mines   </label>
                <label><input type="radio" class="checkbox-margin" name="q5" value="A"> D) Dans la catégorie des carrières   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> Selon le Code Minier, une exploitation souterraine qui extrait des ressources comme le gypse, utilisé pour fabriquer le plâtre, est classée dans la catégorie des carrières. Contrairement aux mines, les carrières concernent l'extraction de matériaux de construction ou industriels, tels que les roches et les minéraux non métalliques.</div>
		</div>
        <div class="question-box" id="q6-box">
            <div class="question">6. Quel est le taux de récupération d'un exploitation souterraine ?	</div>
			<div class="image-container">
				<img class="question-image" src="images/e15.png" alt="Image pour la question 6" onclick="openModal(this);">
				<p class="image-caption">Exploitation souterraine </p>
			</div>
			<div id="imageModal" class="modal">
			    <span class="close" onclick="closeModal()">&times;</span>
			    <img class="modal-content" id="modalImage">
			</div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q6" value="C"> A) Environ 30 %   </label>
                <label><input type="radio" class="checkbox-margin" name="q6" value="D"> B) Environ 100 %   </label>
                <label><input type="radio" class="checkbox-margin" name="q6" value="B"> C) Environ 90 %   </label>
                <label><input type="radio" class="checkbox-margin" name="q6" value="A"> D) Environ 60 %   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> Le taux de récupération d'une exploitation souterraine est généralement d'environ 30 %. Ce taux correspond à la proportion de la ressource extraite par rapport à la quantité totale présente. Il est limité par des contraintes de stabilité des galeries et par la nécessité de laisser des piliers pour soutenir le plafond (Source: BRGM).</div>
		</div>
        <div class="question-box" id="q7-box">
            <div class="question">7. En ordre de grandeur, quelle est la production annuelle française de roches nécessaires à la fabrication du plâtre ?	</div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q7" value="A"> A) Environ 4 millions de tonnes   </label>
                <label><input type="radio" class="checkbox-margin" name="q7" value="D"> B) Environ 400 000 tonnes   </label>
                <label><input type="radio" class="checkbox-margin" name="q7" value="B"> C) Environ 400 000 tonnes   </label>
                <label><input type="radio" class="checkbox-margin" name="q7" value="C"> D) Environ 40 millions de tonnes   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> La production annuelle française de gypse, utilisé pour la fabrication du plâtre, est en ordre de grandeur d'environ 4 millions de tonnes (Chiffre de 2018). Cette quantité reflète l'importance de cette ressource pour l'industrie de la construction et des matériaux finis.</div>
		</div>
        <div class="question-box" id="q8-box">
            <div class="question">8. Est-ce que les réserves actuelles en France permettent d'assurer les besoins futurs en plâtre ?  </div>
			<div class="image-container">
				<img class="question-image" src="images/e14.png" alt="Image pour la question 8" onclick="openModal(this);">
				<p class="image-caption">Les réserves en région parisienne</p>
			</div>
			<div id="imageModal" class="modal">
			    <span class="close" onclick="closeModal()">&times;</span>
			    <img class="modal-content" id="modalImage">
			</div>
			<div class='options'>
                <label><input type="checkbox" class="checkbox-margin" name="q8" value="E"> A) Non, les réserves sont déjà presque totalement épuisées.   </label>
                <label><input type="checkbox" class="checkbox-margin" name="q8" value="B"> B) Non car les réserves sont limitées par des contraintes environnementales </label>
                <label><input type="checkbox" class="checkbox-margin" name="q8" value="C"> C) Oui car les ressources géologiques sont importantes  grâce à l'étendue des gisements dans le Bassin Parisien </label>
                <label><input type="checkbox" class="checkbox-margin" name="q8" value="D"> D) Oui car les ressources sont faciles à exploiter (gisements tabulaires) </label>
                <label><input type="checkbox" class="checkbox-margin" name="q8" value="A"> E) Non car les réserves sont limitées par l'occupation des sols   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> En France, Les ressources géologiques en gypse et en anhydrite sont importantes en volume, mais les réserves exploitables sont limitées par des contraintes environnementales, l'urbanisation, et la compétition pour l'usage des sols.	</div>
		</div>
        <div class="question-box" id="q9-box">
            <div class="question">9. Quelles sont les points positifs de l'utilisation du plâtre dans l'habitat ?  </div>
			<div class='options'>
                <label><input type="checkbox" class="checkbox-margin" name="q9" value="E"> A) Il est plus résistant aux chocs que le béton.   </label>
                <label><input type="checkbox" class="checkbox-margin" name="q9" value="D"> B) Il est totalement ininflammable et ne dégage jamais de fumées toxiques.   </label>
                <label><input type="checkbox" class="checkbox-margin" name="q9" value="F"> C) Il peut être utilisé comme matériau structurel pour les fondations.   </label>
                <label><input type="checkbox" class="checkbox-margin" name="q9" value="C"> D) Il offre une bonne isolation phonique.   </label>
                <label><input type="checkbox" class="checkbox-margin" name="q9" value="A"> E) Il régule l'humidité ambiante </label>
                <label><input type="checkbox" class="checkbox-margin" name="q9" value="B"> F) Il offre une bonne isolation thermique  </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> Le plâtre est apprécié pour ses propriétés de régulation de l'humidité et son rôle dans l'isolation thermique et phonique, bien qu'il ne soit pas un matériau structurel.	</div>
		</div>
        <div class="question-box" id="q10-box">
            <div class="question">10. Quel est le comportement du plâtre en cas d'incendie ?  </div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q10" value="D"> A) Il explose  </label>
                <label><input type="radio" class="checkbox-margin" name="q10" value="A"> B) Il résiste bien </label>
                <label><input type="radio" class="checkbox-margin" name="q10" value="B"> C) Il brûle  </label>
                <label><input type="radio" class="checkbox-margin" name="q10" value="C"> D) Il fond  </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> Le plâtre contient de l'eau de cristallisation qui, en se libérant et s'évaporant sous l'effet de la chaleur, contribue à ralentir la propagation du feu, ce qui en fait un matériau ignifuge.	</div>
		</div>
        <div class="question-box" id="q11-box">
            <div class="question">11. Dans quelle catégorie de roches sédimentaires va-t-on exploiter la matière première nécessaire à la fabrication du plâtre ?</div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q11" value="C"> A) Les roches détritiques.   </label>
                <label><input type="radio" class="checkbox-margin" name="q11" value="A"> B) Les roches évaporitiques.   </label>
                <label><input type="radio" class="checkbox-margin" name="q11" value="D"> C) Les roches pyroclastiques.   </label>
                <label><input type="radio" class="checkbox-margin" name="q11" value="B"> D) Les roches carbonatées.   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> Le gypse, utilisé pour fabriquer le plâtre, se forme par évaporation dans des lacs ou des mers fermées, ce qui le classe parmi les roches évaporitiques.</div>
		</div>
        <div class="question-box" id="q12-box">
            <div class="question">12. Quel personnage historique a favorisé l'utilisation du plâtre comme enduit sur le bois en France et à Paris en particulier ?  </div>
			<div class="image-container">
				<img class="question-image" src="images/e16.jpg" alt="Image pour la question 12" onclick="openModal(this);">
				<p class="image-caption">Hôtel de Roquelaure à Paris ayant appartenu aux comtes de Champlâtreux</p>
			</div>
			<div id="imageModal" class="modal">
			    <span class="close" onclick="closeModal()">&times;</span>
			    <img class="modal-content" id="modalImage">
			</div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q12" value="C"> A) Napoléon III avec les immeubles haussmanniens au XIXe siècle </label>
                <label><input type="radio" class="checkbox-margin" name="q12" value="A"> B) Louis XIV après un incendie dévastateur à Londres   </label>
                <label><input type="radio" class="checkbox-margin" name="q12" value="B"> C) Napoléon Ier avec le Code Napoléon </label>
                <label><input type="radio" class="checkbox-margin" name="q12" value="D"> D) François Ier avec la mise en place des premiers règlements d'urbanisme </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> À la suite de l’incendie dévastateur de Londres en 1666, Louis XIV ordonna l’interdiction des murs en pan de bois non enduits, rendant l’utilisation du plâtre obligatoire pour limiter les risques d’incendie dans les villes françaises, notamment à Paris (source: BNF)</div>
		</div>
        <div class="question-box" id="q13-box">
            <div class="question">13. Quels sont les risques posés en région parisienne par l'extraction de la ressource nécessaire au plâtre ?	</div>
			<div class="image-container">
				<img class="question-image" src="images/e17.png" alt="Image pour la question 13" onclick="openModal(this);">
			</div>
			<div id="imageModal" class="modal">
			    <span class="close" onclick="closeModal()">&times;</span>
			    <img class="modal-content" id="modalImage">
			</div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q13" value="D"> A) La destruction des zones naturelles protégées sur une grande échelle.   </label>
                <label><input type="radio" class="checkbox-margin" name="q13" value="B"> B) La pollution de l'air causée par l'émission de poussières de gypse.   </label>
                <label><input type="radio" class="checkbox-margin" name="q13" value="C"> C) La contamination des nappes phréatiques par infiltration des résidus de gypse.   </label>
                <label><input type="radio" class="checkbox-margin" name="q13" value="A"> D) Les affaissements et effondrements de terrain dus à l'exploitation des carrières souterraines.   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> En région parisienne, l'exploitation des carrières de gypse, souvent souterraines, a engendré des risques importants d'affaissements et d'effondrements, posant des problèmes de sécurité et d'urbanisme.</div>
		</div>
        <div class="question-box" id="q14-box">
            <div class="question">14. A quelle température est chauffée la matière première extraite ?  </div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q14" value="C"> A) Environ 500 °C pour déclencher sa décomposition chimique.   </label>
                <label><input type="radio" class="checkbox-margin" name="q14" value="D"> B) Environ 1000 °C pour la rendre complètement amorphe.   </label>
                <label><input type="radio" class="checkbox-margin" name="q14" value="A"> C) Environ 150 °C pour éliminer une partie de l'eau de cristallisation  </label>
                <label><input type="radio" class="checkbox-margin" name="q14" value="B"> D) Environ 300 °C pour éliminer toute l’eau de cristallisation.   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> Le gypse est chauffé à environ 150 °C pour éliminer une partie de son eau de cristallisation, ce qui permet d’obtenir du hémi-hydrate.	</div>
		</div>
        <div class="question-box" id="q15-box">
            <div class="question">15. Comment s'appelle cette cuisson faite dans un four à plâtre ?  </div>
			<div class="image-container">
				<img class="question-image" src="images/e18.jpg" alt="Image pour la question 15" onclick="openModal(this);">
				<p class="image-caption">Un four à plâtre de chez Grelbex Technologies</p>
			</div>
			<div id="imageModal" class="modal">
			    <span class="close" onclick="closeModal()">&times;</span>
			    <img class="modal-content" id="modalImage">
			</div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q15" value="D"> A) La frittage.   </label>
                <label><input type="radio" class="checkbox-margin" name="q15" value="A"> B) La calcination.   </label>
                <label><input type="radio" class="checkbox-margin" name="q15" value="C"> C) La carbonatation.   </label>
                <label><input type="radio" class="checkbox-margin" name="q15" value="B"> D) La vitrification.   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> La cuisson du gypse à environ 150 °C dans un four à plâtre est appelée calcination. Elle permet d’éliminer partiellement l’eau de cristallisation pour obtenir du semi-hydrate.	</div>
		</div>
        <div class="question-box" id="q16-box">
            <div class="question">16. Que se passe-t-il dans un four à plâtre ?  </div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q16" value="B"> A) Le gypse est fondu pour être moulé sous forme de blocs.   </label>
                <label><input type="radio" class="checkbox-margin" name="q16" value="A"> B) Le gypse est chauffé pour éliminer partiellement son eau de cristallisation, ce qui le transforme en hémi-hdyrate de sulfate de calcium.   </label>
                <label><input type="radio" class="checkbox-margin" name="q16" value="C"> C) Le gypse est mélangé à d'autres minéraux pour créer un matériau composite.   </label>
                <label><input type="radio" class="checkbox-margin" name="q16" value="D"> D) Le gypse est refroidi rapidement pour renforcer sa structure cristalline.   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> Dans un four à plâtre, le gypse est chauffé à environ 150 °C pour perdre une partie de son eau de cristallisation. Ce processus, appelé calcination, produit du hémyhydrate de calcium de formule CaSO<sub>4</sub>, 0.5 H<sub>2</sub>O, prêt à être utilisé.	</div>
		</div>
        <div class="question-box" id="q17-box">
            <div class="question">17. Comment s'utilise l'hémihydrate de sulfate de calcium ?  </div>
			<div class="image-container">
				<img class="question-image" src="images/e19.jpg" alt="Image pour la question 17" onclick="openModal(this);">
				<p class="image-caption">Hémi-hydrate de sulfate de calcium</p>
			</div>
			<div id="imageModal" class="modal">
			    <span class="close" onclick="closeModal()">&times;</span>
			    <img class="modal-content" id="modalImage">
			</div>
			<div class='options'>
                <label><input type="radio" class="checkbox-margin" name="q17" value="A"> A) Il est mélangé à de l'eau pour former une pâte qui durcit en recristallisant en gypse.   </label>
                <label><input type="radio" class="checkbox-margin" name="q17" value="D"> B) Il est dissous dans des solvants chimiques pour fabriquer des adhésifs.   </label>
                <label><input type="radio" class="checkbox-margin" name="q17" value="C"> C) Il est utilisé directement comme poudre sèche dans les constructions.   </label>
                <label><input type="radio" class="checkbox-margin" name="q17" value="B"> D) Il est chauffé à nouveau pour produire du sulfate de calcium anhydre.   </label>
			</div>
			<p class='feedback' style='display:none;'></p>
			<p class='correct-answer' style='display:none;'></p>
			<div class='comment' style='display:none;'><strong>Commentaire:</strong> L’hémihydrate de sulfate de calcium, connu sous le nom de plâtre, est mélangé à de l’eau pour former une pâte. Celle-ci durcit en recristallisant en gypse, ce qui en fait un matériau idéal pour les enduits et les moulages.	</div>
		</div>

        <div class="buttons">
            <button type="button" onclick="evaluateQCM()">Corriger</button>
            <button type="button" onclick="resetTest()">Recommencer</button>
        </div>

    </form>
    <p id="result"></p>
</div>

<footer>
    RocksandWalk - @ <script> document.write(new Date().getFullYear())</script> - Régis THIÉRY
</footer>

<script>
    function evaluateQCM() {
        const correctAnswers = {
            "q1": ["A"],
            "q2": ["A"],
            "q3": ["A"],
            "q4": ["A"],
            "q5": ["A"],
            "q6": ["C"],
            "q7": ["A"],
            "q8": ["B", "A"],
            "q9": ["C", "A", "B"],
            "q10": ["A"],
            "q11": ["A"],
            "q12": ["A"],
            "q13": ["A"],
            "q14": ["A"],
            "q15": ["A"],
            "q16": ["A"],
            "q17": ["A"],
        };
        

        let score = 0;

        function generateFeedbackText(goodAnswers, goodCount, questionBox) {
            // Fonction utilitaire pour récupérer les 3 premières lettres d'une réponse
    
            function getAnswerLabel(value) {
                const label = questionBox.querySelector(`input[value="${value}"]`).parentNode;
                return label.textContent.trim().slice(0, 3); // Extrait les 3 premières lettres (ex: "A)")
            }

            if (goodAnswers.length === 0) {
                return "Pas de bonne réponse !";
            }

            const formattedAnswers = goodAnswers.map(answer => getAnswerLabel(answer));

            if (goodAnswers.length === 1) {
                return `${formattedAnswers[0]} est ${goodCount === 1 ? "la" : "une"} bonne réponse.`;
            }

            if (goodAnswers.length > 1) {
                return `${formattedAnswers.slice(0, -1).join(", ")} et ${formattedAnswers[formattedAnswers.length - 1]} sont de bonnes réponses.`;
            }

            return "";
            }


        for (let question in correctAnswers) {
            const selected = Array.from(document.querySelectorAll(`input[name="${question}"]:checked`)).map(e => e.value);
            const questionBox = document.getElementById(`${question}-box`);
            const correctOptions = correctAnswers[question];
            
            const goodAnswers = selected.filter(val => correctOptions.includes(val));
            let feedback = generateFeedbackText(goodAnswers, correctOptions.length, questionBox);

            let isCorrect = selected.length === correctOptions.length && correctOptions.every(option => selected.includes(option));
            questionBox.classList.toggle("correct", isCorrect);
            questionBox.classList.toggle("incorrect", !isCorrect);

            selected.forEach(val => {
                const optionLabel = questionBox.querySelector(`input[value="${val}"]`).parentNode;
                if (correctOptions.includes(val)) {
                    optionLabel.style.fontWeight = "bold";
                } else {
                    optionLabel.classList.add("strikethrough");
                }
            });

            correctOptions.forEach(val => {
                const correctOptionLabel = questionBox.querySelector(`input[value="${val}"]`).parentNode;
                if (!selected.includes(val)) {
                    correctOptionLabel.style.fontWeight = "bold";
                }
            });

            const correctAnswerLabel = questionBox.querySelector('.correct-answer');
            const feedbackLabel = questionBox.querySelector('.feedback');
            const commentBox = questionBox.querySelector('.comment');
            if (feedbackLabel) {
                feedbackLabel.style.display = 'block';
                feedbackLabel.innerHTML = feedback;
            }
            if (commentBox) {
                commentBox.style.display = 'block';
            }
           
            // Mappage des bonnes réponses avec les lettres (A, B, C, D)
            const correctAnswerLabels = correctOptions.map(val => {
                const label = questionBox.querySelector(`input[value="${val}"]`).parentNode;
                const text = label.textContent.trim();
                return `${text}`;
                });


            let correctAnswerText = correctOptions.length === 1 
                ? `Bonne réponse : ${correctAnswerLabels.join("; ")}`
                : `Bonnes réponses : ${correctAnswerLabels.join("; ")}`;
            
            correctAnswerLabel.innerHTML = correctAnswerText;
            correctAnswerLabel.style.display = 'block';

            if (isCorrect) score+=goodAnswers.length;
        }

        const totalValues = Object.values(correctAnswers).reduce((acc, curr) => acc + curr.length, 0);
        const result = document.getElementById("result");

        if (score === 0) {
            result.textContent = `Vous n'avez obtenu aucune bonne réponse sur ${totalValues}.`;
        } else if (score === 1) {
            result.textContent = `Vous avez obtenu 1 bonne réponse sur ${totalValues}.`;
        } else {
            result.textContent = `Vous avez obtenu ${score} bonnes réponses sur ${totalValues}.`;
        }
    }

    function resetTest() {
        window.location.reload();
    }

    function openModal(imgElement) {
        var modal = document.getElementById("imageModal");
        var modalImg = document.getElementById("modalImage");
        modal.style.display = "block";
        modalImg.src = imgElement.src;  // Utiliser l'image cliquée
    }

    function closeModal() {
        var modal = document.getElementById("imageModal");
        modal.style.display = "none";
    }

</script>




</body>
</html>
